(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{birth:()=>u,email:()=>o,loginPassword:()=>l,nickname:()=>d,password:()=>v,phone:()=>c});const n=(e,t=document)=>t.querySelectorAll(e),a=(e,t=document)=>t.querySelector(e),i=e=>document.createElement(e),r=(e,t)=>{let n=null;return function(a){n||(n=setTimeout((()=>{n=null,t(a)}),e))}},s={EMAIL:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,PHONE:/^(?:(010-\d{4})|(01[1|6|7|8|9]-\d{3,4}))-(\d{4})$/},o=e=>s.EMAIL.test(e),l=e=>Boolean(e),c=e=>s.PHONE.test(e),d=e=>Boolean(e),u=e=>!!e&&(10===e.length&&"Invalid Date"!==new Date(e.replace(".","-")).toString());function v(e){if(e.length<10)return!1;const t=[...e.replace(/[^0-9]/g,"")].map((e=>+e)),n=t.length;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]===t[e+1]&&t[e]===t[e+2])return!1;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]+1===t[e+1]&&t[e]+2===t[e+2])return!1;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]>=2&&t[e]-1===t[e+1]&&t[e]-2===t[e+2])return!0;let a=0;return/[0-9]+/.test(e)&&a++,/[a-z]+/.test(e)&&a++,/[A-Z]+/.test(e)&&a++,/[\!\@\#\$\%\^\&\*\(\)\_\[\]\{\}\;\:\'\"\,\<\.\>\/\?']/.test(e)&&a++,!(a<2)}function p({validator:e,validDangerText:t}){return function({target:n}){const a=n.closest(".input-container__body"),{valid:i,span:r}=f({container:a,target:n,validator:e,validDangerText:t});i&&a.removeChild(r)}}function f({container:e,target:t,validator:n,validDangerText:r}){const{value:s}=t;let o=a(".danger-text",e);return o||(o=i("span"),o.classList.add("danger-text"),e.appendChild(o)),s?((e=>{e.classList.add("input--filled"),e.classList.remove("input--not-filled")})(t),n(s)?(t.classList.remove("input--danger"),{valid:!0,span:o}):(o.innerText=r,t.classList.add("input--danger"),{valid:!1,span:o})):((e=>{e.classList.add("input--not-filled"),e.classList.remove("input--filled"),e.classList.add("input--danger")})(t),o.innerText="값을 입력해주세요.",{valid:!1,span:o})}const h=a("input[name=phone]"),g=a(".verify-btn");h.addEventListener("input",(({target:e})=>{const{value:t}=e;e.value=(e=>{const t=e.replace(/[^0-9]/g,"");let n="";return t.length<=3?t:t.length<7?(n+=t.slice(0,3),n+="-",n+=t.slice(3),n):t.length<11?(n+=t.slice(0,3),n+="-",n+=t.slice(3,6),n+="-",n+=t.slice(6),n):(n+=t.slice(0,3),n+="-",n+=t.slice(3,7),n+="-",n+=t.slice(7,11),n)})(t)})),function(e,t){const i=a(".input-container"),s=n(".checkButton",i),o=n(".cancleButton",i);[...s].forEach((e=>{const n=e.closest(".input-container__body"),i=a("input",n),s=r(200,(e=>({target:n})=>{const{checked:a,unchecked:i}=e.dataset,{name:r}=n;(t[r]?t[r]:()=>!0)(n.value)?e.src=a:e.src=i})(e));i.addEventListener("input",s)})),[...o].forEach((e=>{const t=e.closest(".input-container__body"),n=a(".checkButton",t),i=a("input",t),r=(s=e,o=n,()=>{s.classList.remove("nonExist"),o.classList.add("nonExist")});var s,o;const l=((e,t)=>()=>{e.classList.add("nonExist"),t.classList.remove("nonExist")})(e,n),c=(e=>()=>{e.value="",e.focus()})(i);e.addEventListener("click",c),e.addEventListener("mouseenter",((e,t)=>()=>{e.removeEventListener("blur",t)})(i,l)),e.addEventListener("mouseleave",((e,t)=>()=>{e.addEventListener("blur",t)})(i,l)),i.addEventListener("blur",l),i.addEventListener("focus",r)}))}(0,t);const m={validator:c,validDangerText:"올바른 핸드폰 번호를 입력해주세요."},L=p(m);h.addEventListener("focusout",L);const b=()=>fetch("/api/reqAuth").then((e=>200===e.status?e.json():e)).then((e=>400===!e.status?(alert("실패! 다시 시도해주세요."),!1):(alert(`인증번호는 ${e.auth}입니다.`),!0)));g.addEventListener("click",(({target:e})=>{const t=h.closest(".input-container__body"),{valid:s,span:o}=f({container:t,target:h,...m});s&&b().then((e=>{e&&function(e){const t=e.closest("#inputPhone__buttonContainer");t.removeChild(e);const s=(e=>{const t=i("div");return t.innerHTML='\n    <div class="input-container">\n      <p class="header-text">인증번호</p>\n      <div class="input-container__body">\n        <input name="verify-num" type="text" class="input--not-filled" placeholder="인증번호를 입력해주세요" />\n      </div>\n      <div id="inputPhone__textButtonContainer">\n        <div class="textButton__container">\n          <p class="textButton__contents textButton-mint refresh-verify-num">\n            인증번호 다시받기\n          </p>\n        </div>\n      </div>\n    </div>',t.children[0]})(),o=a('input[name="verify-num"]',s),l=a(".refresh-verify-num",s),c=r(200,function({selector:e,validator:t,validCb:a,invalidCb:i}){return function({target:r}){const s=r.closest(e);return[...n("input",s)].map((({name:e,value:t})=>({name:e,value:t}))).every((({name:e,value:n})=>!!t[e]&&t[e](n)))?void a(r):void i(r)}}({selector:"#inputPhone__buttonContainer",validator:{"verify-num":e=>4===e.length},validCb:()=>{a(".next-btn").classList.add("active")},invalidCb:()=>{a(".next-btn").classList.remove("active")}})),d=p({validator:e=>4===e.length,validDangerText:""});o.addEventListener("input",(({target:e})=>{e.value=e.value.replace(/[^0-9]/g,"").slice(0,4)})),o.addEventListener("input",d),o.addEventListener("input",c),l.addEventListener("click",b),t.appendChild(s);a(".next-btn").addEventListener("click",(()=>{const{value:e}=o;e.length<4||fetch("/api/auth",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({authKey:e})}).then((e=>{if(200===e.status)return e.json();alert("올바르지 않은 인증번호입니다. 다시 시도해주세요.")})).then((e=>{alert("인증 성공!"),location.href="/inputEmail"}))}))}(g)}))})),function({event:e,listener:t}){const n=a(".sub-header"),i=a(".header__left",n);a("a",i).addEventListener(e,t)}({event:"click",listener:()=>location.href="/agreement"})})();