(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{birth:()=>d,email:()=>r,loginPassword:()=>o,nickname:()=>c,password:()=>u,phone:()=>l});const n=(e,t=document)=>t.querySelectorAll(e),a=(e,t=document)=>t.querySelector(e),i=e=>document.createElement(e),s={EMAIL:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,PHONE:/^(?:(010-\d{4})|(01[1|6|7|8|9]-\d{3,4}))-(\d{4})$/},r=e=>s.EMAIL.test(e),o=e=>Boolean(e),l=e=>s.PHONE.test(e),c=e=>Boolean(e),d=e=>!!e&&(10===e.length&&"Invalid Date"!==new Date(e.replace(".","-")).toString());function u(e){if(e.length<10)return!1;const t=[...e.replace(/[^0-9]/g,"")].map((e=>+e)),n=t.length;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]===t[e+1]&&t[e]===t[e+2])return!1;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]+1===t[e+1]&&t[e]+2===t[e+2])return!1;for(let e=0;e<n;e++)if(t[e]&&t[e+1]&&t[e+2]&&t[e]>=2&&t[e]-1===t[e+1]&&t[e]-2===t[e+2])return!0;let a=0;return/[0-9]+/.test(e)&&a++,/[a-z]+/.test(e)&&a++,/[A-Z]+/.test(e)&&a++,/[\!\@\#\$\%\^\&\*\(\)\_\[\]\{\}\;\:\'\"\,\<\.\>\/\?']/.test(e)&&a++,!(a<2)}const v=(e,t)=>{let n=null;return function(a){n||(n=setTimeout((()=>{n=null,t(a)}),e))}};function p(e,t){const i=a(e),s=n(".checkButton",i),r=n(".cancleButton",i);[...s].forEach((e=>{const n=e.closest(".input-container__body"),i=a("input",n),s=v(200,(e=>({target:n})=>{const{checked:a,unchecked:i}=e.dataset,{name:s}=n;(t[s]?t[s]:()=>!0)(n.value)?e.src=a:e.src=i})(e));i.addEventListener("input",s)})),[...r].forEach((e=>{const t=e.closest(".input-container__body"),n=a(".checkButton",t),i=a("input",t),s=(r=e,o=n,()=>{r.classList.remove("nonExist"),o.classList.add("nonExist")});var r,o;const l=((e,t)=>()=>{e.classList.add("nonExist"),t.classList.remove("nonExist")})(e,n),c=(e=>()=>{e.value="",e.focus()})(i);e.addEventListener("click",c),e.addEventListener("mouseenter",((e,t)=>()=>{e.removeEventListener("blur",t)})(i,l)),e.addEventListener("mouseleave",((e,t)=>()=>{e.addEventListener("blur",t)})(i,l)),i.addEventListener("blur",l),i.addEventListener("focus",s)}))}function h({selector:e,validator:t,validCb:a,invalidCb:i}){return function({target:s}){const r=s.closest(e);return[...n("input",r)].map((({name:e,value:t})=>({name:e,value:t}))).every((({name:e,value:n})=>!!t[e]&&t[e](n)))?void a(s):void i(s)}}function m({validator:e,validDangerText:t}){return function({target:n}){const s=n.closest(".input-container__body"),{valid:r,span:o}=function({container:e,target:t,validator:n,validDangerText:s}){const{value:r}=t;let o=a(".danger-text",e);return o||(o=i("span"),o.classList.add("danger-text"),e.appendChild(o)),r?((e=>{e.classList.add("input--filled"),e.classList.remove("input--not-filled")})(t),n(r)?(t.classList.remove("input--danger"),{valid:!0,span:o}):(o.innerText=s,t.classList.add("input--danger"),{valid:!1,span:o})):((e=>{e.classList.add("input--not-filled"),e.classList.remove("input--filled"),e.classList.add("input--danger")})(t),o.innerText="값을 입력해주세요.",{valid:!1,span:o})}({container:s,target:n,validator:e,validDangerText:t});r&&s.removeChild(o)}}const f=({name:e,headerText:t,placeholder:n,type:a="text",isIcon:i=!1})=>`\n<div class="input-container">\n  <p class="header-text">${t}</p>\n  <div class="input-container__body">\n    <input name="${e}" type="${a}" class="input--not-filled" placeholder="${n}" />\n    ${i?'\n  <img src="/resource/cancel.png" alt="cancel button" class="cancleButton nonExist" />\n  <img src="/resource/grayCheck.png" data-checked=\'/resource/mintCheck.png\' data-unchecked=\'/resource/grayCheck.png\' alt="Check button" class="checkButton" />\n':""}\n  </div>\n</div>`,g=a("input[name=email]"),L=a(".duplicate-btn"),E=m({validator:r,validDangerText:"올바른 이메일을 입력해주세요."});g.addEventListener("focusout",E),p("#inputEmail__inputButtonContainer__left",t);const _=v(200,h({selector:"#inputEmail__inputButtonContainer__left",validator:{email:r},validCb:()=>{L.classList.add("subButton__container--active")},invalidCb:()=>{L.classList.remove("subButton__container--active")}}));g.addEventListener("input",_),L.addEventListener("click",(()=>{const e=g.value;r(e)&&fetch("/api/checkDup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>e.json())).then((({result:e,msg:s})=>{if(e)return alert(s),void function(){const e=a("#inputEmail__container"),s=i("div");if(a(".inputEmail__anothor__inputs"))return;s.classList.add("inputEmail__anothor__inputs");const r=f({name:"nickname",headerText:"닉네임",placeholder:"닉네임을 입력해주세요",isIcon:!0}),o=f({name:"password",headerText:"비밀번호",placeholder:"비밀번호을 입력해주세요",type:"password",isIcon:!0}),l=f({name:"birth",headerText:"생년월일",placeholder:"예) 2000.01.01",isIcon:!0}),L=m({validator:c,validDangerText:"올바른 닉네임을 입력해주세요."}),E=m({validator:u,validDangerText:"10자 이상 영어 대문자, 소문자, 숫자, 특수문자 중 2종류를 조합해야 합니다."}),_=m({validator:d,validDangerText:"올바른 생년월일을 입력해주세요."});s.innerHTML+=r+o+l,e.appendChild(s);const b=a("input[name=nickname]"),y=a("input[name=password]"),x=a("input[name=birth]"),T=v(200,h({selector:".container",validator:t,validCb:e=>{const t=e.closest(".container");a(".finish-btn",t).classList.add("active")},invalidCb:e=>{const t=e.closest(".container");a(".finish-btn",t).classList.remove("active")}}));g.addEventListener("input",T),b.addEventListener("input",T),y.addEventListener("input",T),x.addEventListener("input",T),b.addEventListener("blur",L),y.addEventListener("blur",E);x.addEventListener("blur",_),x.addEventListener("input",(({target:e})=>{const{value:t}=e;e.value=(e=>{const t=e.replace(/[^0-9]/g,"");let n="";return t.length<=4?t:t.length<7?(n+=t.slice(0,4),n+=".",n+=t.slice(4),n):(n+=t.slice(0,4),n+=".",n+=t.slice(4,6),n+=".",n+=t.slice(6,8),n)})(t)})),p(".inputEmail__anothor__inputs",t);a(".finish-btn").addEventListener("click",(()=>{const e=a(".container");if(![...n("input",e)].map((({name:e,value:t})=>({name:e,value:t}))).every((({name:e,value:n})=>!!t[e]&&t[e](n))))return;const i=g.value,s=y.value;fetch("/api/signUp",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:i,pw:s})}).then((e=>e.json())).then((e=>{const{result:t,msg:n}=e;if("sucess"===t)return alert(n),void(location.href="/login");alert(n)}))}))}();alert(s)}))})),function({event:e,listener:t}){const n=a(".sub-header"),i=a(".header__left",n);a("a",i).addEventListener(e,t)}({event:"click",listener:()=>location.href="/inputPhone"})})();